{% extends "base.html" %}

{% block title %}{% if current_channel %}{{ current_channel.name }} â€” {% endif %}PADD{% endblock %}

{% block sidebar %}
<aside class="lcars-sidebar" id="channel-sidebar">
  <div class="lcars-sidebar-header">
    <span class="lcars-sidebar-label">Channels</span>
  </div>
  <div class="lcars-sidebar-accent lcars-sidebar-accent-top"></div>
  <nav class="lcars-channel-list" id="channel-nav">
    {% include "partials/channel_list.html" %}
  </nav>
  {% include "partials/channel_management.html" %}
  <div class="lcars-sidebar-accent lcars-sidebar-accent-bottom"></div>
  {% if has_micropub %}
  <div class="lcars-sidebar-new-post">
    <a href="{% url 'new-post' %}" class="lcars-button lcars-button-orange lcars-sidebar-new-post-btn">
      <i class="fas fa-pen"></i> New Post
    </a>
  </div>
  {% endif %}
  <div id="feed-panel"></div>
</aside>
{% endblock %}

{% block content %}
<div id="timeline" class="lcars-timeline" data-mark-read-behavior="{{ mark_read_behavior|default:'explicit' }}">
  <div class="lcars-timeline-header" id="timeline-header">
    <h2 class="lcars-channel-title" id="channel-title">
      {% if current_channel %}{{ current_channel.name }}{% endif %}
    </h2>
    <div class="lcars-filter-toggle">
      {% if unread_only %}
        <a href="{% url 'timeline' channel_uid=channel_uid %}"
           class="lcars-filter-btn"
           hx-get="{% url 'timeline' channel_uid=channel_uid %}"
           hx-target="#timeline"
           hx-swap="innerHTML"
           hx-push-url="true"
           hx-indicator="#lcars-loading">All</a>
        <span class="lcars-filter-btn lcars-filter-active">Unread</span>
      {% else %}
        <span class="lcars-filter-btn lcars-filter-active">All</span>
        <a href="{% url 'timeline' channel_uid=channel_uid %}?unread=1"
           class="lcars-filter-btn"
           hx-get="{% url 'timeline' channel_uid=channel_uid %}?unread=1"
           hx-target="#timeline"
           hx-swap="innerHTML"
           hx-push-url="true"
           hx-indicator="#lcars-loading">Unread</a>
      {% endif %}
    </div>
  </div>
  <div id="timeline-entries">
    {% include "partials/timeline_entries.html" %}
  </div>
</div>
{% endblock %}
